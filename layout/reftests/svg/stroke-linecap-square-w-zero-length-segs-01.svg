<svg xmlns="http://www.w3.org/2000/svg"><title>Test &apos;stroke-linecap: square&apos; with zero length path segments</title><style>path, line { stroke-width: 20px; stroke-linecap: square; } rect { fill: red; } /* expect lime squares to cover red rects */ path.squares-expected, line.squares-expected { stroke: lime; } path.squares-not-expected { stroke: red; } /* thicker stroke to cover squares-not-expected paths */ path.coverer { stroke: lime; stroke-width: 24px; } /* to show edges of shapes to help in debugging: g &gt; rect { stroke: red; stroke-width: 5px; } path.coverer { stroke: lime; stroke-width: 18px; } */</style><rect width="100%" height="100%" style="fill:#0f0"/><g transform="translate(25,25)"><rect width="18" height="18" x="-9" y="-9"/><rect width="18" height="18" x="41" y="41"/><rect width="18" height="18" x="91" y="91"/><path d="M0,0 L0,0 M20,20 L30,30 M50,50 L50,50 M70,70 L80,80 M100,100 L100,100" class="squares-expected"/></g><g transform="translate(25,75)"><rect width="18" height="18" x="-9" y="-9"/><rect width="18" height="18" x="41" y="41"/><rect width="18" height="18" x="91" y="91"/><path d="M0,0 C0,0 0,0 0,0 M20,20 L30,30 M50,50 C50,50 50,50 50,50 M70,70 L80,80 M100,100 C100,100 100,100 100,100" class="squares-expected"/></g><g transform="translate(25,125)"><rect width="18" height="18" x="-9" y="-9"/><rect width="18" height="18" x="41" y="41"/><rect width="18" height="18" x="91" y="91"/><path d="M0,0 A0,10 0 0 0 0,0 M20,20 L30,30 M50,50 A0,10 0 0 0 50,50 M70,70 L80,80 M100,100 A0,10 0 0 0 100,100" class="squares-expected"/></g><g transform="translate(25,175)"><rect width="18" height="18" x="-9" y="-9"/><rect width="18" height="18" x="41" y="41"/><rect width="18" height="18" x="91" y="91"/><path d="M0,0 Z M20,20 L30,30 M50,50 Z M70,70 L80,80 M100,100 Z" class="squares-expected"/></g><g transform="translate(175,25)"><rect width="18" height="18" x="-9" y="-9"/><rect width="18" height="18" x="41" y="41"/><rect width="18" height="18" x="91" y="91"/><path d="M0,0 L0,0 M0,0 L0,0 M20,20 L30,30 M50,50 L50,50 L50,50 M70,70 L80,80 M100,100 L100,100 L100,100" class="squares-expected"/></g><g transform="translate(177,75)"><rect width="18" height="18" x="-9" y="-9"/><rect width="18" height="18" x="41" y="41"/><rect width="18" height="18" x="91" y="91"/><path d="M0,0 C0,0 0,0 0,0 C0,0 0,0 0,0 M20,20 L30,30 M50,50 C50,50 50,50 50,50 C50,50 50,50 50,50 M70,70 L80,80 M100,100 C100,100 100,100 100,100 C100,100 100,100 100,100" class="squares-expected"/></g><g transform="translate(175,125)"><rect width="18" height="18" x="-9" y="-9"/><rect width="18" height="18" x="41" y="41"/><rect width="18" height="18" x="91" y="91"/><path d="M0,0 A0,10 0 0 0 0,0 A0,10 0 0 0 0,0 M20,20 L30,30 M50,50 A0,10 0 0 0 50,50 A0,10 0 0 0 50,50 M70,70 L80,80 M100,100 A0,10 0 0 0 100,100 A0,10 0 0 0 100,100" class="squares-expected"/></g><g transform="translate(175,175)"><rect width="18" height="18" x="-9" y="-9"/><rect width="18" height="18" x="41" y="41"/><rect width="18" height="18" x="91" y="91"/><path d="M0,0 Z Z M20,20 L30,30 M50,50 Z Z M70,70 L80,80 M100,100 Z Z" class="squares-expected"/></g><g><path d="M20,20 L20,20 L30,30 L30,30 L40,40 L40,40" class="squares-not-expected" transform="translate(325,25)"/><path d="M20,20 L40,40" class="coverer" transform="translate(325,25)"/></g><g><path d="M20,20 C20,20 20,20 20,20 C20,20 30,30 30,30 C30,30 30,30 30,30 C30,30 40,40 40,40 C40,40 40,40 40,40" class="squares-not-expected" transform="translate(325,75)"/><path d="M20,20 L40,40" class="coverer" transform="translate(325,75)"/></g><g><path d="M20,20 A0,10 0 0 0 20,20 A0,10 0 0 0 30,30 A0,10 0 0 0 30,30 A0,10 0 0 0 40,40 A0,10 0 0 0 40,40" class="squares-not-expected" transform="translate(325,125)"/><path d="M20,20 L40,40" class="coverer" transform="translate(325,125)"/></g><g transform="translate(325,175)"><rect width="18" height="18" x="11" y="11"/><path d="M20,20 Z L30,30 Z L40,40 Z" class="squares-expected"/></g><g><path d="M0,0 M0,0 M20,20 L30,30 M50,50 M50,50 M70,70 L80,80 M100,100 M100,100" class="squares-not-expected" transform="translate(425,25)"/><path d="M20,20 L30,30 M70,70 L80,80" class="coverer" transform="translate(425,25)"/></g><g transform="translate(525, 25)"><rect width="18" height="18" x="-9" y="-9"/><line x1="0" x2="0" y1="0" y2="0" class="squares-expected"/></g></svg>