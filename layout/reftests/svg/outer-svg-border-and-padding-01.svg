<svg xmlns="http://www.w3.org/2000/svg" class="reftest-wait" version="1.1" style="border:10px solid #0f0;padding:10px;background:#0f0"><title>Test that invalidation takes account of outer-&lt;svg&gt; border/padding</title><desc>This test checks that SVG implementations take account of border and padding on outer &lt;svg&gt; when doing invalidation.</desc><filter id="identity"><feColorMatrix in="SourceGraphic" type="saturate"/></filter><script type="text/javascript">//<![CDATA[

function hide_red_rects()
{
  var background = document.getElementById("background");
  
  document.getElementById('r').setAttribute('opacity','0');
  document.getElementById('f').setAttribute('opacity','0');
  
  <!-- top left -->
  document.elementFromPoint(121, 121).setAttribute('opacity','0');
  <!-- bottom right -->
  document.elementFromPoint(269, 169).setAttribute('opacity','0');

  <!-- outside top left -->
  if (document.elementFromPoint(119, 119) != background) {
    background.setAttribute("fill", "red");
  }
  <!-- outside bottom right -->
  if (document.elementFromPoint(271, 171) != background) {
    background.setAttribute("fill", "purple");
  }

  document.documentElement.removeAttribute('class');
}

document.addEventListener("MozReftestInvalidate", hide_red_rects, false);
setTimeout(hide_red_rects, 4000); // fallback for running outside reftest

  //]]></script><rect id="background" width="100%" height="100%" fill="#0f0"/><rect id="r" width="50" height="50" fill="red"/><rect id="f" width="50" height="50" y="100" fill="red"/><rect width="50" height="50" x="100" y="100" fill="red"/><rect width="50" height="50" x="200" y="100" fill="red"/></svg>