<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="background:red" class="reftest-wait"><defs><rect id="r" width="100%" height="100%" fill="#0f0"/></defs><use id="u" width="0" xlink:href="#r"/><script type="text/javascript"><![CDATA[

    document.addEventListener("MozReftestInvalidate", doTest, false);
    setTimeout(doTest, 4000); // fallback for running outside reftest

    function doTest() {
        // Since the <use> does not reference an <svg> or <symbol>, the value
        // of its 'width' attribute is ignored except to disable/enable its
        // rendering by setting it to zero/non-zero. Setting it to a non-zero
        // value here should show the entire referenced <rect>. See
        // http://www.w3.org/TR/SVG11/struct.html#UseElement
        var u = document.getElementById("u");
        u.setAttribute("width", "1");
        document.documentElement.removeAttribute('class');
      }

    ]]></script></svg>