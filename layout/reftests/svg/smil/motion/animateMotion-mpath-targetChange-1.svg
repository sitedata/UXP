<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" class="reftest-wait"><style>.background{fill:#0f0}.workspace{fill:red}.test{fill:#0f0}</style><defs><path id="moveFarAway" d="M300,300 h0"/><path id="moveToUpperLeft" d="M100,100 h0"/><path id="pathWhoseDAttrChanges" d="M360,360 h0"/><path id="moveToMiddleLeft" d="M100,150 h0"/><path id="moveToMiddleLeft" d="M350,350 h0"/><path id="moveToMiddleCenter" d="M340,340 h0"/><path id="moveToMiddleCenter" d="M150,150 h0"/><path id="moveToMiddleRight" d="M330,330 h0"/><path id="moveToLowerLeft" d="M100,200 h0"/><path id="moveToLowerCenter" d="M150,200 h0"/></defs><script type="text/javascript" xlink:href="../smil-util.js"/><script type="text/javascript">const SVGNS = &quot;http://www.w3.org/2000/svg&quot;; const XLINKNS = &quot;http://www.w3.org/1999/xlink&quot;; function insertPathElem(aPathId, aPathSpec) { var newPath = document.createElementNS(SVGNS, &quot;path&quot;); newPath.setAttribute(&quot;id&quot;, aPathId); newPath.setAttribute(&quot;d&quot;, aPathSpec); // Insert new path into defs var defsElem = document.getElementsByTagName(&quot;defs&quot;)[0]; defsElem.insertBefore(newPath, defsElem.firstChild); } function doTest() { // Seek already, so we&apos;ll have sampled the initial &apos;stale&apos; state document.documentElement.setCurrentTime(1); // Make tweaks var mpathToModify = document.getElementById(&quot;modifyMyTarget&quot;); mpathToModify.setAttributeNS(XLINKNS, &quot;href&quot;, &quot;#moveToUpperLeft&quot;); var mpathWhoseHrefNeedsClearing = document.getElementById(&quot;unsetMyTarget&quot;); mpathWhoseHrefNeedsClearing.removeAttributeNS(XLINKNS, &quot;href&quot;); var pathToTweak = document.getElementById(&quot;pathWhoseDAttrChanges&quot;); pathToTweak.setAttribute(&quot;d&quot;, &quot;M200 100 h0&quot;); var mpathToDelete = document.getElementById(&quot;removeMe&quot;); mpathToDelete.parentNode.removeChild(mpathToDelete); var pathToDelete = document.getElementById(&quot;moveToMiddleCenter&quot;); pathToDelete.parentNode.removeChild(pathToDelete); insertPathElem(&quot;moveToMiddleRight&quot;, &quot;M200,150 h0&quot;); insertPathElem(&quot;moveToLowerRight&quot;, &quot;M200,200 h0&quot;); setTimeAndSnapshot(1, true); } window.addEventListener(&quot;MozReftestInvalidate&quot;, doTest, false);</script><rect width="100%" height="100%" class="background"/><rect width="150" height="150" x="100" y="100" class="workspace"/><rect width="50" height="50" x="0" y="0" class="test"><animateMotion fill="freeze" begin="1" dur="1"><mpath id="modifyMyTarget" xlink:href="#moveFarAway"/></animateMotion></rect><rect width="50" height="50" x="150" y="100" class="test"><animateMotion fill="freeze" begin="1" dur="1"><mpath id="unsetMyTarget" xlink:href="#moveFarAway"/></animateMotion></rect><rect width="50" height="50" x="0" y="0" class="test"><animateMotion fill="freeze" begin="1" dur="1"><mpath xlink:href="#pathWhoseDAttrChanges"/></animateMotion></rect><rect width="50" height="50" x="0" y="0" class="test"><animateMotion fill="freeze" begin="1" dur="1"><mpath xlink:href="#moveToMiddleLeft"/></animateMotion></rect><rect width="50" height="50" x="0" y="0" class="test"><animateMotion fill="freeze" begin="1" dur="1"><mpath xlink:href="#moveToMiddleCenter"/></animateMotion></rect><rect width="50" height="50" x="0" y="0" class="test"><animateMotion fill="freeze" begin="1" dur="1"><mpath xlink:href="#moveToMiddleRight"/></animateMotion></rect><rect width="50" height="50" x="0" y="0" class="test"><animateMotion fill="freeze" begin="1" dur="1"><mpath xlink:href="#moveToLowerLeft"/><mpath xlink:href="#moveFarAway"/></animateMotion></rect><rect width="50" height="50" x="0" y="0" class="test"><animateMotion fill="freeze" begin="1" dur="1"><mpath id="removeMe" xlink:href="#moveFarAway"/><mpath xlink:href="#moveToLowerCenter"/></animateMotion></rect><rect width="50" height="50" x="0" y="0" class="test"><animateMotion fill="freeze" begin="1" dur="1"><mpath xlink:href="#moveToLowerRight"/></animateMotion></rect></svg>