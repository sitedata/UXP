<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" version="1.1"><title>Testing that dynamic changes to the element for a given ID are reflected in &apos;use&apos;</title><use id="u1" x="10%" xlink:href="#r1"/><script>// force frame construction; test that parsing &quot;r1&quot; after frame construction // is still bound to &quot;u1&quot; eventually var rect = document.getElementById(&quot;u1&quot;).getBoundingClientRect();</script><rect id="r1" width="11%" height="100%" fill="#0f0"/><rect id="x" width="11%" height="100%" fill="#0f0"/><use id="u2" x="20%" xlink:href="#r2"/><script>var rect = document.getElementById(&quot;u2&quot;).getBoundingClientRect(); // check that changing an id to &quot;r2&quot; lets u2 find it var r2 = document.getElementById(&quot;x&quot;); r2.setAttribute(&quot;id&quot;, &quot;r2&quot;);</script><rect id="r3" width="10%" height="100%" fill="red"/><rect id="r3" width="11%" height="100%" fill="#0f0"/><use id="u3" x="30%" xlink:href="#r3"/><script>var rect = document.getElementById(&quot;u3&quot;).getBoundingClientRect(); // check that removing the bad r3 lets u3 find the good one var r3 = document.getElementById(&quot;r3&quot;); r3.parentNode.removeChild(r3);</script><rect id="r4" width="10%" height="100%" fill="red"/><rect id="r4" width="11%" height="100%" fill="#0f0"/><use id="u4" x="40%" xlink:href="#r4"/><script>var rect = document.getElementById(&quot;u4&quot;).getBoundingClientRect(); // check that renaming the bad r4 lets u4 find the good one var r4 = document.getElementById(&quot;r4&quot;); r4.removeAttribute(&quot;id&quot;);</script><rect id="r5" width="10%" height="100%" fill="red"/><use id="u5" x="50%" xlink:href="#r5"/><script>var rect = document.getElementById(&quot;u5&quot;).getBoundingClientRect(); // check that changing u5&apos;s reference works var u5 = document.getElementById(&quot;u5&quot;); u5.setAttributeNS(&quot;http://www.w3.org/1999/xlink&quot;, &quot;href&quot;, &quot;#r1&quot;);</script><rect id="r6" width="10%" height="100%" fill="red"/><rect id="r6-2" width="11%" height="100%" fill="#0f0"/><use id="u6" x="60%" xlink:href="#r6"/><script>var rect = document.getElementById(&quot;u6&quot;).getBoundingClientRect(); // check that inserting a good element before the bad r6 works var r6 = document.getElementById(&quot;r6-2&quot;); r6.parentNode.removeChild(r6); r6.setAttribute(&quot;id&quot;, &quot;r6&quot;); document.documentElement.insertBefore(r6, document.documentElement.firstChild);</script><rect id="r7" width="11%" height="100%" fill="#0f0"/><rect id="r7-2" width="10%" height="100%" fill="red"/><use id="u7" x="70%" xlink:href="#r7"/><script>var rect = document.getElementById(&quot;u7&quot;).getBoundingClientRect(); // check that inserting a bad element after a good one doesn&apos;t break anything var r7 = document.getElementById(&quot;r7-2&quot;); r7.parentNode.removeChild(r7); r7.setAttribute(&quot;id&quot;, &quot;r7&quot;); document.documentElement.appendChild(r7);</script><rect id="r8-2" width="11%" height="100%" fill="#0f0"/><rect id="r8" width="10%" height="100%" fill="red"/><use id="u8" x="80%" xlink:href="#r8"/><script>var rect = document.getElementById(&quot;u8&quot;).getBoundingClientRect(); // check that renaming a good element to r8 works var r8 = document.getElementById(&quot;r8-2&quot;); r8.setAttribute(&quot;id&quot;, &quot;r8&quot;);</script><rect width="11%" height="100%" fill="#0f0"/><rect width="11%" height="100%" x="90%" fill="#0f0"/></svg>